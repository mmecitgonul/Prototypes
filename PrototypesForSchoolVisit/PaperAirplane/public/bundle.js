(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&"SCRIPT"===s.currentScript.tagName.toUpperCase()&&(t=s.currentScript.src),!t)){var i=s.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"assets/0.jpg",s=e.p+"assets/img_VillagePlayer.png",i=e.p+"assets/1.png",r=e.p+"assets/2.png",n=e.p+"assets/3.png",o=e.p+"assets/paper.png",h=e.p+"assets/chalk.jpg",a=new Image;a.src=t;const w=new Image;w.src=s;const d=new Image;d.src=i;const p=new Image;p.src=r;const l=new Image;l.src=n;const c=new Image;c.src=o;const y=new Image;y.src=h;const m=document.querySelector("canvas"),x=m.getContext("2d"),u={x:.2,y:.08},g={x:-window.innerWidth/2,y:-window.innerHeight/2},f=new class{constructor(e=!1){this.mouseCoord={x:0,y:0},this.mouseDown={},this.mouseQuery={},this.key={},this.query={},window.addEventListener("keydown",(e=>{this.key[e.code]=!0})),window.addEventListener("keyup",(e=>{this.key[e.code]=!1,this.query[e.code]=!1})),m.addEventListener("mousemove",(e=>{this.mouseCoord={x:e.offsetX,y:e.offsetY}})),m.addEventListener("mousedown",(e=>{this.mouseDown[e.button]=!0})),m.addEventListener("mouseup",(e=>{this.mouseDown[e.button]=!1,this.mouseQuery[e.button]=!1})),e&&m.addEventListener("contextmenu",(e=>{e.preventDefault()}))}isKeyDown(e){return!0===this.key[e]}keyPressed(e){return!0!==this.query[e]&&!0===this.key[e]&&(this.query[e]=!0,!0)}getMousePosition(){return this.mouseCoord}isMouseDown(e=0){return this.mouseDown[e]}mousePressed(e=0){return!0!==this.mouseQuery[e]&&!0===this.mouseDown[e]&&(this.mouseQuery[e]=!0,!0)}resetCanvas(){x.clearRect(0,0,m.width,m.height),m.width=window.innerWidth,m.height=window.innerHeight}fillCanvas(e="#FF10F0"){x.beginPath(),x.rect(0,0,m.width,m.height),x.fillStyle=e,x.fill()}drawPic(e,t,s,i,r){x.drawImage(e,t-i/2-g.x,s-r/2-g.y,i,r)}writeText(e,t,s,i="center",r="sans-serif",n=20,o="red"){x.font=`${n}px ${r}`,x.fillStyle=o,x.textAlign=i,x.fillText(e,t,s)}resetCam(){u.x=.2,u.y=.08,g.x=-window.innerWidth/2,g.y=-window.innerHeight/2}}(!1);class v{constructor(){this.col=0,this.tick=0}animate(e,t,s,i,r,n,o,h,a,w){const d=Math.floor(this.tick/w)%a;this.col=t*d,x.drawImage(e,this.col,h*s,t,s,i-n/2-g.x,r-o/2-g.y,n,o),this.tick%w==0&&(this.col<a?this.col++:this.col=0),this.tick++}}const C=[{left:-75,right:175,top:225,bottom:475}];class D{update(){}render(){}}class S{constructor(){this.playerSpr={img:w,crop:{x:30,y:47.83},pos:{x:0,y:0},size:{x:80,y:100},row:0,maxCol:0,frame:4},this.playerAnim=new v,this.speed=7}update(){this.render(this.playerSpr),this.move(this.playerSpr),this.cameraFollow(this.playerSpr),this.collision(this.playerSpr)}render(e){f.fillCanvas("#131010"),f.drawPic(a,50,350,250,250),this.playerAnim.animate(w,e.crop.x,e.crop.y,e.pos.x,e.pos.y,e.size.x,e.size.y,e.row,e.maxCol,e.frame)}collision(e){const t=e.pos.x-e.size.x/6,s=e.pos.x+e.size.x/6,i=e.pos.y-e.size.y/16,r=e.pos.y+e.size.y/2;C.forEach((n=>{t<n.right&&s>n.left&&i<n.bottom&&r>n.top?(this.speed=0,f.isKeyDown("KeyD")?e.pos.x-=7:f.isKeyDown("KeyA")?e.pos.x+=7:f.isKeyDown("KeyS")?e.pos.y-=7:f.isKeyDown("KeyW")&&(e.pos.y+=7)):this.speed=7}))}cameraFollow(e){g.x=Math.round(g.x-(g.x+m.width/2-e.pos.x)*u.x),g.y=Math.round(g.y-(g.y+m.height/2-e.pos.y)*u.y)}move(e){f.isKeyDown("KeyD")?(e.maxCol=8,e.row=0,e.pos.x+=this.speed):f.isKeyDown("KeyA")?(e.maxCol=8,e.row=1,e.pos.x-=this.speed):f.isKeyDown("KeyS")?(e.maxCol=8,e.row=2,e.pos.y+=this.speed):f.isKeyDown("KeyW")?(e.maxCol=8,e.row=3,e.pos.y-=this.speed):3==e.row?(e.maxCol=4,e.row=7):2==e.row?(e.maxCol=4,e.row=4):1==e.row?(e.maxCol=4,e.row=5):0==e.row&&(e.maxCol=4,e.row=6)}}class M{constructor(){this.active=!1,this.player=new S,this.map=new D}update(){this.player.update()}render(){}}class P{constructor(){this.active=!0,this.paperAnim=new v,this.paperSprite={img:c,crop:{x:48,y:32},pos:{x:200,y:-100},size:{x:120,y:80},row:2,maxCol:8,frame:30},this.prlxM0=0,this.prlxM1=0,this.prlxM2=0,this.distance=0,this.speed=30,this.fall=1,this.boost=0,this.startTimer=1,this.terms={x:22,y:5},this.answer="",this.lost=!1}update(){this.render(this.paperSprite),this.lost||(this.equation(),this.vFX(this.paperSprite))}render(e){this.prlxM0+=this.speed,this.prlxM0>window.outerWidth&&(this.prlxM0=0),this.prlxM1+=this.speed,this.prlxM1>2*window.outerWidth&&(this.prlxM1=0),this.prlxM2+=this.speed,this.prlxM2>4*window.outerHeight&&(this.prlxM2=0),f.drawPic(d,-this.prlxM0,0,window.innerWidth,window.innerHeight),f.drawPic(d,-this.prlxM0+window.innerWidth,0,window.innerWidth,window.innerHeight),f.drawPic(p,-this.prlxM1+window.outerWidth,0,window.innerWidth,window.innerHeight),f.drawPic(l,-this.prlxM2+window.outerWidth,0,window.innerWidth,window.innerHeight),this.paperAnim.animate(e.img,e.crop.x,e.crop.y,e.pos.x,e.pos.y,e.size.x,e.size.y,e.row,e.maxCol,e.frame),f.writeText(`Distance: ${this.distance} m`,20,50,"left","Papyrus",50,"black"),f.drawPic(y,-500,-150,300,100),f.writeText(`${this.terms.x} * ${this.terms.y}`,180,160,"center","Comic Sans MS",30,"beige"),f.writeText(`= ${this.answer}`,180,200,"center","Comic Sans MS",30,"azure"),this.startTimer>0&&(f.fillCanvas(`rgb(0, 0, 0, ${this.startTimer})`),this.startTimer-=.1),this.lost&&(f.fillCanvas("rgb(0, 0, 0)"),f.writeText("You Lost!",window.innerWidth/2,250,"center","Comic Sans MS",50,"red"),f.writeText('Press "R" to reset.',window.innerWidth/2,window.innerHeight/2,"center","Navigator",20,"wheat"),f.writeText(`Distance: ${this.distance}m`,window.innerWidth/2,window.innerHeight/1.8,"center","Navigator",20,"wheat"))}equation(){(f.keyPressed("KeyE")||this.terms.x*this.terms.y==parseFloat(this.answer))&&(this.terms.x=Math.floor(20*Math.random())+1,this.terms.y=Math.floor(10*Math.random())+1,this.answer="",this.boost=30),f.keyPressed("Digit0")&&this.answer.length<4?this.answer+="0":f.keyPressed("Digit1")&&this.answer.length<4?this.answer+="1":f.keyPressed("Digit2")&&this.answer.length<4?this.answer+="2":f.keyPressed("Digit3")&&this.answer.length<4?this.answer+="3":f.keyPressed("Digit4")&&this.answer.length<4?this.answer+="4":f.keyPressed("Digit5")&&this.answer.length<4?this.answer+="5":f.keyPressed("Digit6")&&this.answer.length<4?this.answer+="6":f.keyPressed("Digit7")&&this.answer.length<4?this.answer+="7":f.keyPressed("Digit8")&&this.answer.length<4?this.answer+="8":f.keyPressed("Digit9")&&this.answer.length<4?this.answer+="9":f.keyPressed("Backspace")&&(this.answer=this.answer.slice(0,-1))}vFX(e){f.keyPressed("KeyF")&&(this.boost=30),this.boost>0&&(e.pos.y-=4,e.pos.x+=6,this.speed+=1,this.boost-=1),this.distance+=Math.round(this.speed/20),this.speed-=.05,this.speed<1&&(this.speed=1),this.speed>60&&(this.speed=60),e.pos.y+=this.fall,e.pos.x-=1.5*this.fall,e.pos.y>window.innerHeight/1.5&&(this.lost=!0),e.pos.x<-window.innerWidth/1.5&&(this.lost=!0),e.pos.y<-window.innerHeight/2.5&&(e.pos.y=-window.innerHeight/2.5),e.pos.x>window.innerWidth/2.5&&(e.pos.x=window.innerWidth/2.5),this.speed<=5?(e.frame=10,this.fall=3.5,e.row=1,e.maxCol=2):this.speed>10&&this.speed<=20?(e.frame=15,this.fall=.5):this.speed>20&&this.speed<=30?(e.frame=11,this.fall=.4):this.speed>30&&this.speed<=40?(e.frame=7,this.fall=.3,e.row=3,e.maxCol=15):this.speed>40&&this.speed<=50?(e.frame=3,this.fall=.2):this.speed>50&&(e.frame=2,e.pos.y+=.1)}}const k=new class{constructor(){this.frameT=1e3/60,this.deltaT=0,this.lastT=0,this.villageScene=new M,this.planeScene=new P}start(){this.update(0)}update(e){requestAnimationFrame(this.update.bind(this)),this.deltaT=(e-this.lastT)/this.frameT,this.lastT=e,this.deltaT>1&&(this.render(),this.planeScene.active&&this.planeScene.update(),f.isKeyDown("KeyR")&&(this.planeScene=new P,this.planeScene.active=!0,this.villageScene.active=!1,this.reset()))}render(){f.resetCanvas()}reset(){f.resetCam()}};window.addEventListener("load",(()=>k.start()))})();