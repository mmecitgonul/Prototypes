(()=>{"use strict";class t{constructor(t,s,i,e){this.name=t,this.weight=s,this.value=i,this.amount=e}}class s{constructor(s,i,e){this.called=!1,this.sold=!1,this.bought=!1,this.gold=0,this.travelling=!0,this.distance=95,this.location="",this.cargos=[new t("Fish",1,2,3),new t("Marble",4,20,5),new t("Cheese",2,6,3),new t("Rifle",4,9,12),new t("Gunpowder",16,4,35)],this.store=[new t("Paper",3,14,32),new t("Wheat",4,2,14)],this.pos=s,this.size={x:250,y:350},this.name=i,this.speed=50,this.encumbrance=0,this.baseSpeed=e}calcSpeed(t){for(let t=0;t<this.cargos.length;t++)this.encumbrance+=this.cargos[t].weight;return this.encumbrance}travel(){this.encumbrance=0,this.calcSpeed(this.cargos),this.speed=this.baseSpeed-this.encumbrance,this.travelling&&(this.distance-=this.speed,this.distance<=0&&(this.travelling=!1,0===this.store.length?(this.store.push(new t("Goes cheese",2,100,3)),this.store.push(new t("Gunpowder",2,40,3))):1===this.store.length&&this.store.push(new t("jewelry",2,20,3))))}draw(t){!1===this.called&&(setInterval((()=>this.travel()),1e3),this.called=!0),t.fillStyle="BurlyWood",t.strokeStyle="#84240c",t.shadowBlur=2,t.shadowOffsetX=5,t.shadowOffsetY=5,t.shadowColor="#563232",t.lineWidth=2,t.font="bold 20px Navigator",t.strokeRect(this.pos.x+5,this.pos.y+5,this.size.x,this.size.y),t.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y),t.fillStyle="#1B1212",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillText(this.name,this.pos.x+20,this.pos.y+25),t.fillRect(this.pos.x,this.pos.y+35,this.size.x,3);for(let s=0;s<this.cargos.length;s++)t.fillStyle="#353935",t.lineWidth=2,t.font="italic 15px Arial",t.fillRect(this.pos.x,this.pos.y+45+16*s,this.size.x,1),t.fillText(this.cargos[s].name+" | "+this.cargos[s].value+" Gold | "+this.cargos[s].weight+"kg | x"+this.cargos[s].amount,this.pos.x+5,this.pos.y+60+15*s),t.fillRect(this.pos.x,this.pos.y+60+16*s,this.size.x,1);if(t.fillStyle="#1B1212",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillRect(this.pos.x,this.pos.y+132,this.size.x,3),t.fillStyle="#1B1212",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillRect(this.pos.x,this.pos.y+232,this.size.x,3),t.fillStyle="#1B1212",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillRect(this.pos.x,this.pos.y+285,this.size.x,3),t.fillStyle="#1B1212",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillRect(this.pos.x+145,this.pos.y+290,2,58),this.travelling)t.fillStyle="#001f3f",t.font="bold 16px Navigator",t.shadowBlur=0,t.fillText("Travelling: "+this.distance+" km",this.pos.x+10,this.pos.y+320),t.lineWidth=2,t.font="bold 18px Navigator",t.fillStyle="#4B5945",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillText("Speed: "+this.speed+"km/h",this.pos.x+20,this.pos.y+205);else if(!this.travelling){t.fillStyle="black",t.font="bold 25px Navigator",t.shadowBlur=0,t.fillText("Docked"+this.location,this.pos.x+10,this.pos.y+320);for(let s=0;s<this.store.length;s++)t.fillStyle="#353935",t.lineWidth=2,t.font="italic 15px Arial",t.fillRect(this.pos.x,this.pos.y+245+16*s,this.size.x,1),t.fillText(this.store[s].name+" | "+1.5*this.store[s].value+" Gold | "+this.store[s].weight+"kg | x"+this.store[s].amount,this.pos.x+5,this.pos.y+260+15*s),t.fillRect(this.pos.x,this.pos.y+260+16*s,this.size.x,1)}t.lineWidth=2,t.font="bold 18px Navigator",t.fillStyle="brown",t.fillText("Encumbrance: "+this.encumbrance,this.pos.x+20,this.pos.y+180),t.lineWidth=2,t.font="bold 18px Navigator",t.fillStyle="#FFB200",t.fillText("Gold: "+this.gold,this.pos.x+20,this.pos.y+160),t.fillStyle="#3D0301",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillRect(this.pos.x+150,this.pos.y+295,15,15),t.fillRect(this.pos.x+170,this.pos.y+295,15,15),t.fillRect(this.pos.x+190,this.pos.y+295,15,15),t.fillRect(this.pos.x+210,this.pos.y+295,15,15),t.fillRect(this.pos.x+230,this.pos.y+295,15,15),t.fillStyle="#EEDF7A",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillRect(this.pos.x+210,this.pos.y+320,15,15),t.fillRect(this.pos.x+230,this.pos.y+320,15,15),t.fillStyle="blue",t.shadowOffsetX=1.1,t.shadowOffsetY=1.1,t.fillRect(this.pos.x+150,this.pos.y+320,45,15)}setSail(){!1===this.travelling&&(this.distance=210,this.travelling=!0)}sellCargo(){for(let t=0;t<this.cargos.length;t++)t===this.cargos.length-1&&!1===this.sold&&!1===this.travelling&&(this.gold+=1.5*this.cargos[t].value,this.cargos.pop(),console.log(this.cargos),this.sold=!0);this.sold=!1}buyCargo(){for(let t=0;t<=this.store.length;t++)t===this.store.length-1&&!1===this.bought&&this.store[t].value<=this.gold&&!1===this.travelling&&(this.gold-=this.store[t].value,this.cargos.push(this.store[t]),this.store.pop(),this.bought=!0);this.bought=!1}}let i=new class{constructor(){this.canvas=document.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.ship_Sally=new s({x:50,y:50},"Ship Zeelandia",50),this.ship_Corkus=new s({x:350,y:50},"Ship Corkus",35),this.keys={spc:!1,one:!1,two:!1,z:!1,x:!1},this.switched=!1,window.addEventListener("resize",(()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight})),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,document.addEventListener("keydown",(t=>this.handleKey(t,!0))),document.addEventListener("keyup",(t=>this.handleKey(t,!1)))}tick(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ship_Sally.draw(this.ctx),this.ship_Corkus.draw(this.ctx),this.keys.spc?this.switched?this.ship_Corkus.setSail():this.ship_Sally.setSail():this.keys.one?this.switched?this.ship_Corkus.sellCargo():this.ship_Sally.sellCargo():this.keys.two&&(this.switched?this.ship_Corkus.buyCargo():this.ship_Sally.buyCargo()),this.keys.x?this.switched=!0:this.keys.z&&(this.switched=!1),this.ctx.lineWidth=2,this.ctx.font="italic 18px Navigator",this.ctx.fillStyle="white",this.ctx.fillText("Press '1' to sell",700,200),this.ctx.fillText("Press '2' to buy",700,230),this.ctx.fillText("Press 'space' to travel",700,260),this.ctx.lineWidth=2,this.ctx.font="bold 20px Navigator",this.ctx.fillStyle="brown",this.ctx.fillText("Press 'x' to switch to: Ship Corkus",700,160),this.ctx.fillText("Press 'z' to switch to: Ship Zeelandia",700,130),this.ctx.lineWidth=2,this.ctx.font="bold 25px Navigator",this.ctx.fillStyle="gold",this.ctx.fillText("Treasury: "+(this.ship_Sally.gold+this.ship_Corkus.gold),700,350),this.ctx.lineWidth=2,this.ctx.font="italic 18px Navigator",this.ctx.fillStyle="wheat",this.ctx.fillText("Naval Trading Sim Prototype for improving math by Mecit",920,600)}handleKey(t,s){switch(t.key){default:return;case" ":this.keys.spc=s;break;case"1":this.keys.one=s;break;case"2":this.keys.two=s;break;case"z":this.keys.z=s;break;case"x":this.keys.x=s}}};const e=()=>{requestAnimationFrame(e),i.tick()};requestAnimationFrame(e)})();